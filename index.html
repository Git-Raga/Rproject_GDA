<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>R Project for GDA Course</title>
  <style>
    html {
      line-height: 1.5;
      font-family: Georgia, serif;
      font-size: 20px;
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      overflow-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 1em;
      }
      h1 {
        font-size: 1.8em;
      }
    }
    @media print {
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, 'Lucida Console', Consolas, monospace;
      font-size: 85%;
      margin: 0;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
      overflow-wrap: normal;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      background-color: #1a1a1a;
      border: none;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC ul {
      padding-left: 1.3em;
    }
    #TOC > ul {
      padding-left: 0;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { color: #008000; } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { color: #008000; font-weight: bold; } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<section id="hi-there" class="cell markdown"
data-_cell_guid="1b36a120-2004-41dd-87f1-cd98759a722d"
data-_uuid="7dc6d964-5529-44e9-9e45-4a207810e111"
data-jupyter="{&quot;outputs_hidden&quot;:false}" data-trusted="true">
<h1>Hi There</h1>
<p>Created this site capturing the steps followed in the final
phase of Google Data Analyst certification couse [using R] <br></p>
<p><br> <img
src="vertopal_d909df9118d84f5f89bb4dad05c858b1/0bda86f8-fc4c-4fc0-84bc-2d7719a9f824.jpg"
alt="GDACERTSMALL.jpg" /><br></p>
<p>(<a
href="http://www.coursera.org/google-certificates/data-analytics-certificate"
class="uri">http://www.coursera.org/google-certificates/data-analytics-certificate</a>)</p>
<p>Note<br> <em>This was Inspired &amp; Influenced by the work of :
JHELISON GABRIEL LIMA UCHOA</em><br> Note:<br> While resuing these R
commands - you may have to remove the + signs, as it is it may give
error, use the + signs when needed, and remove the + signs which is
usually prefixed in the begining of each command</p>
</section>
<div class="cell markdown"
data-_cell_guid="606f4021-7730-4360-a743-1b27836f16ec"
data-_uuid="a23d7200-62b4-473a-9ac6-50161b1e792f" data-trusted="true">
<hr>
</div>
<section id="lets-break-it-down-" class="cell markdown"
data-_cell_guid="0696a1a8-f29b-4492-975e-4592895a5109"
data-_uuid="a3ba4d98-f782-4eae-b986-7a404d5e4947">
<h1><strong>Lets break it down</strong><br></h1>
<p><img
src="vertopal_d909df9118d84f5f89bb4dad05c858b1/e836555b-01ce-40a6-bab4-d8dde8323f95.jpg"
alt="GDA2.jpg" /> <hr></p>
</section>
<section id="step-1--selecting-the-data-for-analysis"
class="cell markdown"
data-_cell_guid="32136bf7-1250-43d7-b498-87043f64ba42"
data-_uuid="4e542554-4a48-4acf-bb9b-759cdf0f7201" data-trusted="true">
<h1>Step 1 : Selecting the Data for Analysis</h1>
<p>Lets pick this dataset available in public<br> <a
href="https://www.kaggle.com/datasets/timgid/cyclistic-dataset-google-certificate-capstone"
class="uri">https://www.kaggle.com/datasets/timgid/cyclistic-dataset-google-certificate-capstone</a><br>
we shall not be using the DB in Kaggle directly- <br> (<em>I was getting
prolonged delays in kaggle and at times the error message is not
displayed... so i shall do this with RStudio and paste the result
here</em>)<br> <br>Once you download this is how the files will be<br>
<img
src="vertopal_d909df9118d84f5f89bb4dad05c858b1/adf70b05-cff4-4bae-b4fc-3222af3e4d1c.jpg"
alt="GDA3.jpg" /> <br> Once you move them to a specific folder in your
system- this is how they look in side R studio<br> <img
src="vertopal_d909df9118d84f5f89bb4dad05c858b1/2e02cf4b-7e7d-43a5-89a0-e81970588dc3.jpg"
alt="GDAlistfilesinr.jpg" /> <br>There are few steps here<br></p>
<p>a) we need to combine all of them in to one CSV file<br></p>
<p>b) then we need to load this in R studio (by creating DF (DataFrame)
of CSV in R - for further processing<br> <hr></p>
</section>
<div class="cell code" data-execution_count="4"
data-execution="{&quot;iopub.execute_input&quot;:&quot;2023-09-10T22:17:36.615300Z&quot;,&quot;iopub.status.busy&quot;:&quot;2023-09-10T22:17:36.613490Z&quot;,&quot;iopub.status.idle&quot;:&quot;2023-09-10T22:17:37.681434Z&quot;}"
data-trusted="true">
<div class="sourceCode" id="cb1"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a></span></code></pre></div>
<div class="output stream stderr">
<pre><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ dplyr     1.1.2     ✔ readr     2.1.4
✔ forcats   1.0.0     ✔ stringr   1.5.0
✔ ggplot2   3.4.2     ✔ tibble    3.2.1
✔ lubridate 1.9.2     ✔ tidyr     1.3.0
✔ purrr     1.0.1     
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors
</code></pre>
</div>
</div>
<div class="cell markdown">
<p>Combining all these individual CSV to one common CSV is down in this
sequence<br></p>
<p>a) we list them in a file with the full path - using list
function<br></p>
<p>b) using row bind function and lappy function - we pass on these
files one by one in to a single BIG csv file - which wil be our
Datafarme for this project</p>
</div>
<div class="cell code" data-execution_count="10"
data-execution="{&quot;iopub.execute_input&quot;:&quot;2023-09-09T17:57:40.212529Z&quot;,&quot;iopub.status.busy&quot;:&quot;2023-09-09T17:57:40.210494Z&quot;,&quot;iopub.status.idle&quot;:&quot;2023-09-09T17:57:40.227774Z&quot;}"
data-trusted="true">
<div class="sourceCode" id="cb3"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>csv_files<span class="ot">&lt;-</span><span class="fu">list.files</span>(<span class="at">path =</span> <span class="st">&quot;../GDA ProjectR/KaggleDataSet/&quot;</span>, <span class="at">recursive =</span> <span class="cn">TRUE</span>,<span class="at">full.names =</span> <span class="cn">TRUE</span>)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="sc">/</span><span class="er">/</span> this is step a<span class="er">)</span>prefixing the full pathon top of the file name</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> csv_files</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a> [<span class="dv">1</span>] <span class="st">&quot;../GDA ProjectR/KaggleDataSet//202004-divvy-tripdata.csv&quot;</span> <span class="st">&quot;../GDA ProjectR/KaggleDataSet//202005-divvy-tripdata.csv&quot;</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a> [<span class="dv">3</span>] <span class="st">&quot;../GDA ProjectR/KaggleDataSet//202006-divvy-tripdata.csv&quot;</span> <span class="st">&quot;../GDA ProjectR/KaggleDataSet//202007-divvy-tripdata.csv&quot;</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a> [<span class="dv">5</span>] <span class="st">&quot;../GDA ProjectR/KaggleDataSet//202008-divvy-tripdata.csv&quot;</span> <span class="st">&quot;../GDA ProjectR/KaggleDataSet//202009-divvy-tripdata.csv&quot;</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a> [<span class="dv">7</span>] <span class="st">&quot;../GDA ProjectR/KaggleDataSet//202010-divvy-tripdata.csv&quot;</span> <span class="st">&quot;../GDA ProjectR/KaggleDataSet//202011-divvy-tripdata.csv&quot;</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a> [<span class="dv">9</span>] <span class="st">&quot;../GDA ProjectR/KaggleDataSet//202012-divvy-tripdata.csv&quot;</span> <span class="st">&quot;../GDA ProjectR/KaggleDataSet//Divvy_Trips_2020_Q1.csv&quot;</span>  </span></code></pre></div>
</div>
<div class="cell code">
<div class="sourceCode" id="cb4"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> combinedcsv_MasterDF<span class="ot">&lt;-</span><span class="fu">do.call</span>(rbind,<span class="fu">lapply</span>(csv_files,read.csv))</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>what is rbind? (row bind, <span class="at">cbind =</span> column bind)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>what is <span class="fu">Lapply</span>()<span class="sc">-</span> it takes each element of array<span class="sc">/</span>matric and applies the functions and returns the new value</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>now we have this one combined master datafarme <span class="cf">for</span> our project</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>(View with V <span class="cf">in</span> caps)</span></code></pre></div>
</div>
<div class="cell markdown">
<p><img
src="vertopal_d909df9118d84f5f89bb4dad05c858b1/3f5d39fa-ae69-4320-998e-e633aea47611.jpg"
alt="masterdf.jpg" /></p>
</div>
<section id="-step-2--cleaning-up-the-data" class="cell markdown">
<h1><strong># Step 2 | Cleaning up the Data</strong></h1>
</section>
<div class="cell markdown">
<p>*we need to ensure that there are no duplicates in this Dataframe
this step is needed before we proceed further<br> **This is the command
for that<br></p>
<blockquote>
<p>sum(duplicated(combinedcsv_MasterDF$ride_id))<br><br> [1] 209</p>
</blockquote>
<p>so we have 209 duplicate entries with the ride_id column (we are
considering this as a sort of primary key) <br>This command helps us ot
check the number of unique rows in a data frame<br></p>
<blockquote>
<p>length(unique(combinedcsv_MasterDF$ride_id))</p>
</blockquote>
<p>[1] 3541474</p>
<blockquote>
<p>length(combinedcsv_MasterDF$ride_id)</p>
</blockquote>
<p>[1] 3541683</p>
<p><br>So it is clear if we remove the duplicate entries, we will have
3541474 entries our dataframe*</p>
</div>
<div class="cell code">
<div class="sourceCode" id="cb5"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> CleanMasterDF<span class="ot">&lt;-</span>combinedcsv_MasterDF[<span class="sc">!</span><span class="fu">duplicated</span>(combinedcsv_MasterDF<span class="sc">$</span>ride_id),]</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">View</span>(CleanMasterDF)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">length</span>(CleanMasterDF)</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">13</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">length</span>(CleanMasterDF<span class="sc">$</span>ride_id)</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">3541474</span></span></code></pre></div>
</div>
<section id="step-3-reformat-the-data" class="cell markdown">
<h1>#Step 3: Reformat the Data</h1>
</section>
<div class="cell markdown">
<p>The columns started at and ended at - have Date and Time combined as
Timestamp<br> <img
src="vertopal_d909df9118d84f5f89bb4dad05c858b1/be1875a2-0373-4947-8011-16977d28e50e.png"
alt="image.png" /><br> We need to get this formatted, so that we can do
the end hrs-start hrs and get the ride duration data<br></p>
<p>these will simplyfy and help in our calcualtions<br></p>
</div>
<div class="cell code">
<div class="sourceCode" id="cb6"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>currently these columns are set as chr, which chr we can not do any minus operations</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">str</span>(CleanMasterDF)</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="st">&#39;data.frame&#39;</span><span class="sc">:</span>	<span class="dv">3541474</span> obs. of  <span class="dv">13</span> variables<span class="sc">:</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a> <span class="er">$</span> ride_id           <span class="sc">:</span> chr  <span class="st">&quot;A847FADBBC638E45&quot;</span> <span class="st">&quot;5405B80E996FF60D&quot;</span> <span class="st">&quot;5DD24A79A4E006F4&quot;</span> <span class="st">&quot;2A59BBDF5CDBA725&quot;</span> ...</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a> <span class="sc">$</span> rideable_type     <span class="sc">:</span> chr  <span class="st">&quot;docked_bike&quot;</span> <span class="st">&quot;docked_bike&quot;</span> <span class="st">&quot;docked_bike&quot;</span> <span class="st">&quot;docked_bike&quot;</span> ...</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a> <span class="sc">$</span> started_at        <span class="sc">:</span> chr  <span class="st">&quot;2020-04-26 17:45:14&quot;</span> <span class="st">&quot;2020-04-17 17:08:54&quot;</span> <span class="st">&quot;2020-04-01 17:54:13&quot;</span> <span class="st">&quot;2020-04-07 12:50:19&quot;</span> ...</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a> <span class="sc">$</span> ended_at          <span class="sc">:</span> chr  <span class="st">&quot;2020-04-26 18:12:03&quot;</span> <span class="st">&quot;2020-04-17 17:17:03&quot;</span> <span class="st">&quot;2020-04-01 18:08:36&quot;</span> <span class="st">&quot;2020-04-07 13:02:31&quot;</span> ..</span></code></pre></div>
</div>
<div class="cell code">
<div class="sourceCode" id="cb7"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>So lets change them <span class="cf">in</span> to POSIXct format<span class="sc">&lt;</span>br<span class="sc">&gt;</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>R uses different functions <span class="cf">for</span> dealing with date and time like <span class="fu">as.Date</span> () </span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>which only deals with the date value,etc <span class="fu">POSIXct</span> () is used <span class="cf">for</span> handling the date, time and time zones <span class="cf">in</span> R. </span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>In POSIXct, the ct stands <span class="cf">for</span> calendar time.</span></code></pre></div>
</div>
<div class="cell code">
<div class="sourceCode" id="cb8"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>lets execute these commands<span class="sc">&lt;</span>br<span class="sc">&gt;</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="er">&gt;</span> CleanMasterDF<span class="sc">$</span>formatted_starttime<span class="ot">&lt;-</span><span class="fu">as.POSIXct</span>(CleanMasterDF<span class="sc">$</span>started_at,<span class="at">tz=</span><span class="fu">Sys.timezone</span>(),<span class="at">format=</span><span class="st">&quot;%Y-%m-%d %H:%M:%S&quot;</span>)</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> CleanMasterDF<span class="sc">$</span>formatted_endtime<span class="ot">&lt;-</span><span class="fu">as.POSIXct</span>(CleanMasterDF<span class="sc">$</span>ended_at,<span class="at">tz=</span><span class="fu">Sys.timezone</span>(),<span class="at">format=</span><span class="st">&quot;%Y-%m-%d %H:%M:%S&quot;</span>)</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>This will create <span class="dv">2</span> new reformatted columns</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>Now you can see the change <span class="cf">in</span> the format with str command </span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span> formatted_starttime<span class="sc">:</span> POSIXct, format<span class="sc">:</span> <span class="st">&quot;2020-04-26 17:45:14&quot;</span> <span class="st">&quot;2020-04-17 17:08:54&quot;</span> <span class="st">&quot;2020-04-01 17:54:13&quot;</span> <span class="st">&quot;2020-04-07 12:50:19&quot;</span> ...</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a> <span class="sc">$</span> formatted_endtime  <span class="sc">:</span> POSIXct, format<span class="sc">:</span> <span class="st">&quot;2020-04-26 18:12:03&quot;</span> <span class="st">&quot;2020-04-17 17:17:03&quot;</span> <span class="st">&quot;2020-04-01 18:08:36&quot;</span> <span class="st">&quot;2020-04-07 13:02:31&quot;</span> ...</span></code></pre></div>
</div>
<div class="cell code">
<div class="sourceCode" id="cb9"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>It is now possible to subtract from these two columns and get the Ride hours as a separate column</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> CleanMasterDF<span class="ot">&lt;-</span>CleanMasterDF <span class="sc">%&gt;%</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>     <span class="fu">mutate</span>(<span class="at">ride_time_mints=</span><span class="fu">as.numeric</span>(CleanMasterDF<span class="sc">$</span>formatted_endtime<span class="sc">-</span>CleanMasterDF<span class="sc">$</span>formatted_starttime)<span class="sc">/</span><span class="dv">60</span>)</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div>
</div>
<div class="cell markdown">
<p><img
src="vertopal_d909df9118d84f5f89bb4dad05c858b1/7d7ab429-c556-4087-9344-579897b795f6.png"
alt="image.png" /></p>
</div>
<div class="cell code">
<div class="sourceCode" id="cb10"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>Next, lets look at the start time column <span class="sc">-</span> <span class="cf">if</span> we have to get inisghts <span class="cf">in</span> terms of which day, </span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>which month, which time of the day<span class="sc">-</span> there were max<span class="sc">/</span>minimum usage <span class="sc">-</span> then we need to <span class="cf">break</span> this combined TIMESTAMP </span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>column <span class="cf">in</span> to separate columns <span class="sc">-</span> only then <span class="sc">-</span> it becomes easy <span class="cf">for</span> our analysis</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>CleanMasterDF<span class="ot">&lt;-</span>CleanMasterDF <span class="sc">%&gt;%</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">trip_Month=</span><span class="fu">strftime</span>(CleanMasterDF<span class="sc">$</span>formatted_starttime,<span class="st">&quot;%m&quot;</span>))</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>refer to this documentation to know more about strftime <span class="cf">function</span> <span class="cf">in</span> R</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a></span></code></pre></div>
</div>
<div class="cell markdown">
<p><img
src="vertopal_d909df9118d84f5f89bb4dad05c858b1/fd29ed92-4fbc-4d94-9fc2-0008c44c25e2.png"
alt="image.png" /><br> <img
src="vertopal_d909df9118d84f5f89bb4dad05c858b1/5e352197-c540-47ea-b293-62b58339415b.png"
alt="image.png" /><br></p>
<p>Now we can see the new column with the number - representing each
month <br> <img
src="vertopal_d909df9118d84f5f89bb4dad05c858b1/5d7591b4-ed46-4a4c-811f-e97f20bbb31c.png"
alt="image.png" /> <br> This command will update the same with Text |
<br> CleanMasterDF&lt;-CleanMasterDF %&gt;%</p>
<ul>
<li><pre><code>mutate(trip_Month_name=strftime(CleanMasterDF$formatted_starttime,&quot;%b&quot;))&lt;br&gt;</code></pre></li>
</ul>
<p><img
src="vertopal_d909df9118d84f5f89bb4dad05c858b1/12d64668-adbb-4343-bdac-b7b24b5b53ac.png"
alt="image.png" /></p>
</div>
<div class="cell code">
<div class="sourceCode" id="cb12"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">unique</span>(CleanMasterDF<span class="sc">$</span>trip_Month_name)</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a> [<span class="dv">1</span>] <span class="st">&quot;Apr&quot;</span> <span class="st">&quot;May&quot;</span> <span class="st">&quot;Jun&quot;</span> <span class="st">&quot;Jul&quot;</span> <span class="st">&quot;Aug&quot;</span> <span class="st">&quot;Sep&quot;</span> <span class="st">&quot;Oct&quot;</span> <span class="st">&quot;Nov&quot;</span> <span class="st">&quot;Dec&quot;</span> <span class="st">&quot;Jan&quot;</span> <span class="st">&quot;Feb&quot;</span> <span class="st">&quot;Mar&quot;</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">unique</span>(CleanMasterDF<span class="sc">$</span>trip_Month)</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a> [<span class="dv">1</span>] <span class="st">&quot;04&quot;</span> <span class="st">&quot;05&quot;</span> <span class="st">&quot;06&quot;</span> <span class="st">&quot;07&quot;</span> <span class="st">&quot;08&quot;</span> <span class="st">&quot;09&quot;</span> <span class="st">&quot;10&quot;</span> <span class="st">&quot;11&quot;</span> <span class="st">&quot;12&quot;</span> <span class="st">&quot;01&quot;</span> <span class="st">&quot;02&quot;</span> <span class="st">&quot;03&quot;</span></span></code></pre></div>
</div>
<div class="cell code">
<div class="sourceCode" id="cb13"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>Next step is to add a week day NAME column, so that we can perform analysis on which day of the week, we had usage etc</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a> we use strftime with <span class="st">&quot;%a&quot;</span> this time</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> CleanMasterDF<span class="ot">&lt;-</span>CleanMasterDF <span class="sc">%&gt;%</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>     <span class="fu">mutate</span>(<span class="at">trip_day=</span><span class="fu">strftime</span>(CleanMasterDF<span class="sc">$</span>formatted_starttime,<span class="st">&quot;%a&quot;</span>))</span></code></pre></div>
</div>
<div class="cell markdown">
<p><img
src="vertopal_d909df9118d84f5f89bb4dad05c858b1/e392a820-2c19-4074-b705-04a49d705d84.png"
alt="image.png" /></p>
</div>
<div class="cell code">
<div class="sourceCode" id="cb14"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="sc">/</span><span class="er">/</span>then lets add a column <span class="cf">for</span> the START HOUR</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>start hour <span class="sc">-</span> adding a column <span class="cf">for</span> this</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>we use %H <span class="cf">for</span> this</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="co"># # Hours as decimal number (00–23). As a special exception strings such as ‘⁠24:00:00⁠’ are accepted for input, since ISO 8601 allows these.</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a> CleanMasterDF<span class="ot">&lt;-</span>CleanMasterDF <span class="sc">%&gt;%</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>     <span class="fu">mutate</span>(<span class="at">trip_starthour=</span><span class="fu">strftime</span>(CleanMasterDF<span class="sc">$</span>formatted_starttime,<span class="st">&quot;%H&quot;</span>))</span></code></pre></div>
</div>
<div class="cell markdown">
<p><img
src="vertopal_d909df9118d84f5f89bb4dad05c858b1/1df5e1e2-9c6f-4a1c-be85-ffbd8c41cfe0.png"
alt="image.png" /></p>
</div>
<div class="cell markdown">
<p>Now we are good with additional columns we wanted for analysis - we
can begin the deep dive now with the questions<br> <img
src="vertopal_d909df9118d84f5f89bb4dad05c858b1/0b32566e-fb16-4f3e-9dd8-3913631cf2d9.png"
alt="image.png" /></p>
</div>
<div class="cell code">
<div class="sourceCode" id="cb15"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>we can save this back <span class="cf">in</span> an excel<span class="sc">/</span>CSV to avoid the rework <span class="sc">-</span> <span class="cf">if</span> anything goes wrong <span class="sc">-</span> we can always read this back <span class="cf">in</span> to a dataframe</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> CleanMasterDF <span class="sc">%&gt;%</span> <span class="fu">write.csv</span>(<span class="st">&quot;cleanedupfileforDataframe.csv&quot;</span>)</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">getwd</span>()</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;/Users/rkrishnamurthy1/RFiles&quot;</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">setwd</span>(<span class="st">&quot;/Users/rkrishnamurthy1/GDA ProjectR/&quot;</span>)</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> CleanMasterDF <span class="sc">%&gt;%</span> <span class="fu">write.csv</span>(<span class="st">&quot;cleanedupfileforDataframe.csv&quot;</span>)</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>this can be later used like this <span class="sc">:</span> CleanMasterDF<span class="ot">&lt;-</span><span class="fu">read.csv</span>(<span class="st">&quot;cleanedupfileforDataframe.csv&quot;</span>)</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a></span></code></pre></div>
</div>
<div class="cell markdown">
<p><img
src="vertopal_d909df9118d84f5f89bb4dad05c858b1/99c541f3-7660-4a4f-a116-1ab3931537f7.png"
alt="image.png" /></p>
</div>
<section
id="step-4-what-are-the-problem-staementsquestions-we-need-to-find-answer-for"
class="cell markdown">
<h1>Step 4: What are the Problem Staements/Questions we need to find
answer for?</h1>
<p>**1. what is the usage of memebers VS casual?<br></p>
<ol>
<li>how to increase the members count?<br></li>
<li>what is the impact of days/months in the usage?<br></li>
<li>what are recommendations to increase the revenue?**</li>
</ol>
</section>
<section id="step-5--questions-from-columns-" class="cell markdown">
<h1>Step 5 : Questions from Columns<br></h1>
<p>Rideable_type : How many types of bikes are there and their usage
%<br> member_casual : <br> what is the percentage of member and casual,
<br> what is their usage over weekdays?<br> what is the relation of bike
type for each of them</p>
</section>
<section id="step-6-consolidating-answers-" class="cell markdown">
<h1>Step 6: Consolidating Answers.<br></h1>
<p>Lets begin with <strong>rideable_type</strong> column</p>
</section>
<div class="cell markdown">
<blockquote>
<p>CleanMasterDF %&gt;%<br> '+ group_by(rideable_type) %&gt;%<br> '+
summarise(count=length(rideable_type),<br> '+
'%'=(length(rideable_type)/nrow(CleanMasterDF))*100)<br> A tibble: 3 ×
3<br> rideable_type count <code>%</code><br> <chr> <int> <dbl><br> 1
classic_bike 70616 1.99<br> 2 docked_bike 2966113 83.8 <br> 3
electric_bike 504745 14.3 <br></p>
</blockquote>
<pre><code>we have seen the split/distribution of the different bikes now - lets see the same via plots &lt;br&gt;


ggplot(CleanMasterDF,aes(x=factor(rideable_type),fill=factor(rideable_type)))+
geom_bar()+geom_label(aes(label=..count..), vjust=1,stat=&#39;count&#39;,position = &quot;stack&quot;)+
scale_y_continuous(labels = function(x) format(x, scientific = FALSE))</code></pre>
<p><img
src="vertopal_d909df9118d84f5f89bb4dad05c858b1/4a38438d-944f-4b42-8dde-178a815f9b51.png"
alt="image.png" /><br></p>
<blockquote>
<pre><code>Conclusion is </code></pre>
<ul>
<li>docked bike is more with 84%</li>
<li>Next followed by electric bike with 14%</li>
</ul>
</blockquote>
</div>
<div class="cell markdown">
<p>Next lets take the member_cacual column for analysis</p>
</div>
<div class="cell code" data-execution_count="2"
data-execution="{&quot;iopub.execute_input&quot;:&quot;2023-09-24T23:22:40.592481Z&quot;,&quot;iopub.status.busy&quot;:&quot;2023-09-24T23:22:40.548737Z&quot;,&quot;iopub.status.idle&quot;:&quot;2023-09-24T23:22:40.634272Z&quot;}"
data-trusted="true">
<div class="sourceCode" id="cb18"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> CleanMasterDF <span class="sc">%&gt;%</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>     <span class="fu">group_by</span>(member_casual) <span class="sc">%&gt;%</span> </span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>     <span class="fu">summarise</span>(<span class="at">count=</span><span class="fu">length</span>(ride_id),<span class="st">&#39;%&#39;</span><span class="ot">=</span>(<span class="fu">length</span>(ride_id)<span class="sc">/</span><span class="fu">nrow</span>(CleanMasterDF))<span class="sc">*</span><span class="dv">100</span>)</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 2 × 3</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>  member_casual   count   <span class="st">`</span><span class="at">%</span><span class="st">`</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>  <span class="sc">&lt;</span>chr<span class="sc">&gt;</span>           <span class="er">&lt;</span>int<span class="sc">&gt;</span> <span class="er">&lt;</span>dbl<span class="sc">&gt;</span></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> casual        <span class="dv">1366550</span>  <span class="fl">38.6</span></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> member        <span class="dv">2174924</span>  <span class="fl">61.4</span></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">ggplot</span>(CleanMasterDF,<span class="fu">aes</span>(member_casual,<span class="at">fill=</span>member_casual))<span class="sc">+</span><span class="fu">geom_bar</span>()<span class="sc">+</span><span class="fu">labs</span>(<span class="at">x=</span><span class="st">&quot;Casual Vs Members(X axis)&quot;</span>,<span class="at">title =</span> <span class="st">&#39;Chart 02 - Casual VS Members Distribution&#39;</span>)<span class="sc">+</span></span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>     <span class="fu">geom_label</span>(<span class="fu">aes</span>(<span class="at">label=</span>..count..), <span class="at">vjust=</span><span class="dv">1</span>,<span class="at">stat=</span><span class="st">&#39;count&#39;</span>,<span class="at">position =</span> <span class="st">&quot;stack&quot;</span>)<span class="sc">+</span></span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>     <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> <span class="cf">function</span>(x) <span class="fu">format</span>(x, <span class="at">scientific =</span> <span class="cn">FALSE</span>))</span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a>                         </span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a>                         </span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a>                         </span></code></pre></div>
<div class="output error" data-ename="ERROR"
data-evalue="Error in parse(text = x, srcfile = src): &lt;text&gt;:1:1: unexpected &#39;&gt;&#39;
1: &gt;
    ^
">
<pre><code>Error in parse(text = x, srcfile = src): &lt;text&gt;:1:1: unexpected &#39;&gt;&#39;
1: &gt;
    ^
Traceback:

</code></pre>
</div>
</div>
<div class="cell markdown">
<p><img
src="vertopal_d909df9118d84f5f89bb4dad05c858b1/4b5c3bf4-0a06-4be0-a99f-315f88284771.png"
alt="image.png" /> <br></p>
<blockquote>
<pre><code>Conclusion is </code></pre>
<p>Casual users are less with 38% <br> Members are more with 61%</p>
</blockquote>
</div>
<div class="cell markdown">
<p>Now lets take the trip <strong>MONTH</strong> column</p>
</div>
<div class="cell code">
<div class="sourceCode" id="cb21"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> CleanMasterDF <span class="sc">%&gt;%</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>     <span class="fu">group_by</span>(CleanMasterDF<span class="sc">$</span>trip_Month_name) <span class="sc">%&gt;%</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>     <span class="fu">summarise</span>(<span class="at">count=</span><span class="fu">length</span>(ride_id),<span class="st">&quot;Percentage%&quot;</span><span class="ot">=</span>(<span class="fu">length</span>(ride_id)<span class="sc">/</span><span class="fu">nrow</span>(CleanMasterDF))<span class="sc">*</span><span class="dv">100</span>)</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 12 × 3</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>   <span class="st">`</span><span class="at">CleanMasterDF$trip_Month_name</span><span class="st">`</span>  count <span class="st">`</span><span class="at">Percentage%</span><span class="st">`</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>   <span class="sc">&lt;</span>chr<span class="sc">&gt;</span>                            <span class="er">&lt;</span>int<span class="sc">&gt;</span>         <span class="er">&lt;</span>dbl<span class="sc">&gt;</span></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a> <span class="dv">1</span> Apr                              <span class="dv">84776</span>          <span class="fl">2.39</span></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a> <span class="dv">2</span> Aug                             <span class="dv">622361</span>         <span class="fl">17.6</span> </span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a> <span class="dv">3</span> Dec                             <span class="dv">131364</span>          <span class="fl">3.71</span></span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a> <span class="dv">4</span> Feb                             <span class="dv">139585</span>          <span class="fl">3.94</span></span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a> <span class="dv">5</span> Jan                             <span class="dv">143884</span>          <span class="fl">4.06</span></span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a> <span class="dv">6</span> Jul                             <span class="dv">551480</span>         <span class="fl">15.6</span> </span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a> <span class="dv">7</span> Jun                             <span class="dv">343005</span>          <span class="fl">9.69</span></span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a> <span class="dv">8</span> Mar                             <span class="dv">143418</span>          <span class="fl">4.05</span></span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a> <span class="dv">9</span> May                             <span class="dv">200274</span>          <span class="fl">5.66</span></span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span> Nov                             <span class="dv">259716</span>          <span class="fl">7.33</span></span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a><span class="dv">11</span> Oct                             <span class="dv">388653</span>         <span class="fl">11.0</span> </span>
<span id="cb21-18"><a href="#cb21-18" aria-hidden="true" tabindex="-1"></a><span class="dv">12</span> Sep                             <span class="dv">532958</span>         <span class="fl">15.0</span> </span></code></pre></div>
</div>
<div class="cell markdown">
<p>we can actually move/convert this in to a temporary dataframe -
inorder to not to use the entire DF, this will result in faster
responses</p>
<blockquote>
<p>tempDF_month&lt;-CleanMasterDF %&gt;%</p>
</blockquote>
<ul>
<li><pre><code>group_by(CleanMasterDF$trip_Month_name) %&gt;%</code></pre></li>
<li><pre><code>summarise(count=length(ride_id),&quot;Percentage%&quot;=(length(ride_id)/nrow(CleanMasterDF))*100)</code></pre>
<blockquote>
<p>View(tempDF_month)</p>
</blockquote></li>
</ul>
<p><img
src="vertopal_d909df9118d84f5f89bb4dad05c858b1/696c3c34-01f5-4045-887a-b631b065c848.png"
alt="image.png" /><br> Now lets chart this out wiht %</p>
</div>
<div class="cell code">
<div class="sourceCode" id="cb24"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(tempDF_month,<span class="fu">aes</span>(<span class="at">x=</span>Month,<span class="at">y=</span>count))<span class="sc">+</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>     <span class="fu">geom_point</span>()<span class="sc">+</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span> <span class="fu">geom_bar</span>(<span class="at">stat=</span><span class="st">&#39;identity&#39;</span>,<span class="at">fill=</span><span class="st">&#39;lightblue&#39;</span>,<span class="at">color=</span><span class="st">&#39;red&#39;</span>)<span class="sc">+</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>     <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> <span class="cf">function</span>(x) <span class="fu">format</span>(x, <span class="at">scientific =</span> <span class="cn">FALSE</span>))<span class="sc">+</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>     <span class="fu">geom_label</span>(<span class="fu">aes</span>(<span class="at">label=</span>count), <span class="at">vjust=</span><span class="dv">1</span>,<span class="at">position =</span> <span class="st">&quot;stack&quot;</span>)</span></code></pre></div>
</div>
<div class="cell markdown">
<p><img
src="vertopal_d909df9118d84f5f89bb4dad05c858b1/e00e96db-ed1c-4905-a8b2-76da72b6200b.png"
alt="image.png" /></p>
</div>
<div class="cell markdown">
<blockquote>
<p>Conslusion is Jul, Aug and sep are the months with the highest
usage</p>
</blockquote>
<p>If we need to plot in the month asending order, - then use this
command <br></p>
<p>tempDF_month&lt;-tempDF_month %&gt;%</p>
<ul>
<li><pre><code>mutate(Month=factor(Month,levels=month.abb))%&gt;% arrange(Month)</code></pre></li>
</ul>
<p><img
src="vertopal_d909df9118d84f5f89bb4dad05c858b1/c77aa4eb-53d8-48c0-b7f1-e8b976de96f9.png"
alt="image.png" /></p>
</div>
<div class="cell code">
<div class="sourceCode" id="cb26"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>We can do further analysis comparing the seasonality <span class="sc">/</span>factors influencing the increase </span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="cf">in</span> rides during these <span class="fu">months</span> (Temperature, weather, holiday etc)</span></code></pre></div>
</div>
<div class="cell markdown">
<p>Now lets continue with the week day column for our analysis</p>
<blockquote>
<p>tempDF_day&lt;-CleanMasterDF %&gt;%</p>
</blockquote>
<ul>
<li><pre><code>group_by(CleanMasterDF$trip_day) %&gt;%</code></pre></li>
<li><pre><code>summarise(count=length(ride_id),&quot;pers&quot;=(length(ride_id)/nrow(CleanMasterDF))*100)</code></pre>
<blockquote>
<p>View(tempDF_day) colnames(tempDF_day)[1]&lt;-'weekday'</p>
</blockquote></li>
</ul>
</div>
<div class="cell markdown">
<p><img
src="vertopal_d909df9118d84f5f89bb4dad05c858b1/9a07a13c-17b9-402a-a5d0-15e87218e838.png"
alt="image.png" /></p>
</div>
<div class="cell code">
<div class="sourceCode" id="cb29"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">ggplot</span>(tempDF_day,<span class="fu">aes</span>(<span class="at">x=</span><span class="fu">reorder</span>(weekday,<span class="sc">-</span>count),<span class="at">y=</span>count))<span class="sc">+</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>     <span class="fu">geom_point</span>()<span class="sc">+</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span> <span class="fu">geom_bar</span>(<span class="at">stat=</span><span class="st">&#39;identity&#39;</span>,<span class="at">fill=</span><span class="st">&#39;lightblue&#39;</span>,<span class="at">color=</span><span class="st">&#39;green&#39;</span>)<span class="sc">+</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>     <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> <span class="cf">function</span>(x) <span class="fu">format</span>(x, <span class="at">scientific =</span> <span class="cn">FALSE</span>))<span class="sc">+</span></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>     <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label=</span>count),<span class="at">size =</span> <span class="dv">4</span>, <span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="at">vjust =</span> <span class="fl">1.5</span>, <span class="at">position =</span> <span class="st">&quot;stack&quot;</span>)</span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>                         </span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>                         </span></code></pre></div>
</div>
<div class="cell markdown">
<p><img
src="vertopal_d909df9118d84f5f89bb4dad05c858b1/7b2874fb-2763-476f-be18-65999af12b43.png"
alt="image.png" /></p>
<blockquote>
<p>Conclusion</p>
</blockquote>
<ul>
<li>we have most of the trips happening on weekends and Fridays</li>
</ul>
</div>
<div class="cell markdown">
<p><strong>Next it will make sense to add the members and casual riders
in to this table and see how they show up</strong></p>
</div>
<div class="cell code">
<div class="sourceCode" id="cb30"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> tempDF_day_members<span class="ot">&lt;-</span><span class="fu">as.data.frame</span>(CleanMasterDF <span class="sc">%&gt;%</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>                                       <span class="fu">group_by</span>(trip_day) <span class="sc">%&gt;%</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>                                       <span class="fu">summarise</span>(</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>                                           <span class="at">count=</span><span class="fu">length</span>(ride_id),</span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>                                           <span class="st">&#39;members&#39;</span><span class="ot">=</span><span class="fu">sum</span>(member_casual<span class="sc">==</span><span class="st">&quot;member&quot;</span>),</span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>                                                      <span class="st">&#39;casual&#39;</span><span class="ot">=</span><span class="fu">sum</span>(member_casual<span class="sc">==</span><span class="st">&quot;casual&quot;</span>)</span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>                                       ))</span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">View</span>(tempDF_day_members)</span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a></span></code></pre></div>
</div>
<div class="cell markdown">
<p><img
src="vertopal_d909df9118d84f5f89bb4dad05c858b1/8e57df13-2334-43f0-9889-c64a5ed14351.png"
alt="image.png" /></p>
</div>
<div class="cell markdown">
<p>it was difficult to print the chart in a single one, so lets try
creating 2</p>
<blockquote>
<p>memberplot&lt;-ggplot(tempDF_day_members,aes(x=trip_day,y=casual))+labs(x='WeekDays',title="memebr
riders distribution by Weekday")+ geom_point()+</p>
</blockquote>
<ul>
<li><pre><code>geom_bar(stat=&#39;identity&#39;,fill=&#39;lightblue&#39;,color=&#39;green&#39;,width=.7)+</code></pre></li>
<li><pre><code>scale_y_continuous(labels = function(x) format(x, scientific = FALSE))+</code></pre></li>
<li><pre><code>     geom_text(aes(label=members),size = 4, hjust = 0.5, vjust = 1.5, position = &quot;stack&quot;)</code></pre>
<blockquote>
<p>casualplot&lt;-ggplot(tempDF_day_members,aes(x=trip_day,y=casual))+labs(x='WeekDays',title="casual
riders Distribution by Weekday")+ geom_point()+</p>
</blockquote></li>
<li><pre><code>geom_bar(stat=&#39;identity&#39;,fill=&#39;lightgray&#39;,color=&#39;red&#39;,width=.7)+</code></pre></li>
<li><pre><code>scale_y_continuous(labels = function(x) format(x, scientific = FALSE))+</code></pre></li>
<li><pre><code>     geom_text(aes(label=casual),size = 4, hjust = 0.5, vjust = 1.5, position = &quot;stack&quot;)</code></pre>
<blockquote>
<p>casualplot<br> memberplot<br> ggarrange(casualplot,memberplot) (for
this we should use this first library(ggpubr))</p>
</blockquote></li>
</ul>
<p><img
src="vertopal_d909df9118d84f5f89bb4dad05c858b1/fb2f8466-b982-410f-8aad-7f7dc508278e.png"
alt="image.png" /></p>
<p>if we have to do this in a single plot - then we need to do little
bit of formatting change in the dataframe, (I tried and could not find
any other option for this - may be there is another better option, I am
not sure)</p>
<p>we used be using MELT function to achieve this Melt needs this
libraries</p>
<p>install.packages("MASS") <br> install.packages("reshape2") <br>
install.packages("reshape") <br></p>
<p>library(MASS) <br> library(reshape2) <br> library(reshape)<br></p>
<blockquote>
<p>tempDF_day_members_updated&lt;-melt(tempDF_day_members,id.vars="trip_day")<br></p>
</blockquote>
<blockquote>
<p>View(tempDF_day_members_updated)</p>
</blockquote>
<p><img
src="vertopal_d909df9118d84f5f89bb4dad05c858b1/a76c557a-4932-4816-9064-aed47a10cbac.png"
alt="image.png" /></p>
</div>
<div class="cell markdown">
<p>Lets remove the count column</p>
<blockquote>
<p>tempDF_day_members1&lt;-tempDF_day_members[,-2] <br>
View(tempDF_day_members1)<br>
tempDF_day_members_updated&lt;-melt(tempDF_day_members1,id.vars="trip_day")<br></p>
</blockquote>
<p><img
src="vertopal_d909df9118d84f5f89bb4dad05c858b1/fb3df714-74c9-4063-9afb-426cbb324c7f.png"
alt="image.png" /></p>
</div>
<div class="cell code">
<div class="sourceCode" id="cb37"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">ggplot</span>(tempDF_day_members_updated,<span class="fu">aes</span>(<span class="at">x=</span><span class="fu">reorder</span>(trip_day,value),<span class="at">y=</span><span class="fu">factor</span>(value),<span class="at">fill=</span><span class="fu">factor</span>(variable)))</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span> <span class="fu">geom_bar</span>(<span class="at">position=</span><span class="fu">position_dodge</span>(<span class="at">width=</span><span class="dv">1</span>),<span class="at">stat=</span><span class="st">&#39;identity&#39;</span>)<span class="sc">+</span> <span class="fu">geom_text</span>(</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>     <span class="fu">aes</span>(<span class="at">x=</span><span class="fu">factor</span>(trip_day),<span class="at">y=</span><span class="fu">factor</span>(value),<span class="at">label=</span>value),<span class="at">position=</span><span class="fu">position_dodge</span>(<span class="at">width=</span><span class="dv">1</span>),<span class="at">vjust=</span><span class="sc">-</span><span class="fl">0.5</span>,<span class="at">size=</span><span class="dv">3</span>)</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a></span></code></pre></div>
</div>
<div class="cell markdown">
<p><img
src="vertopal_d909df9118d84f5f89bb4dad05c858b1/36577089-7da2-43c3-abb0-a03aedf91233.png"
alt="image.png" /></p>
</div>
<div class="cell markdown">
<blockquote>
<p>Conclusion</p>
<ul>
<li>Except for Saturday - members count is more than cacual riders</li>
<li>Most of the members are using bikes on wednesday, thursday and then
friday</li>
<li>Saturday has highiest number of riders</li>
</ul>
</blockquote>
</div>
<div class="cell markdown">
<p><strong>Next lets focus on the ride hour to understand which time of
the day - the we have most rides</strong></p>
</div>
<div class="cell code">
<div class="sourceCode" id="cb38"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>CleanMasterDF <span class="sc">%&gt;%</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>     <span class="fu">group_by</span>(trip_starthour) <span class="sc">%&gt;%</span> </span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>     <span class="fu">summarise</span>(<span class="at">count =</span> <span class="fu">length</span>(ride_id),</span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>     <span class="st">&#39;%&#39;</span> <span class="ot">=</span> (<span class="fu">length</span>(ride_id) <span class="sc">/</span> <span class="fu">nrow</span>(cycledf)) <span class="sc">*</span> <span class="dv">100</span>,</span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>     <span class="st">&#39;members_p&#39;</span> <span class="ot">=</span> (<span class="fu">sum</span>(member_casual <span class="sc">==</span> <span class="st">&quot;member&quot;</span>) <span class="sc">/</span> <span class="fu">length</span>(ride_id)) <span class="sc">*</span> <span class="dv">100</span>,</span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>     <span class="st">&#39;casual_p&#39;</span> <span class="ot">=</span> (<span class="fu">sum</span>(member_casual <span class="sc">==</span> <span class="st">&quot;casual&quot;</span>) <span class="sc">/</span> <span class="fu">length</span>(ride_id)) <span class="sc">*</span> <span class="dv">100</span>,</span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>     <span class="st">&#39;member_casual_perc_difer&#39;</span> <span class="ot">=</span> members_p <span class="sc">-</span> casual_p) <span class="sc">%&gt;%</span> <span class="fu">print</span>(<span class="at">n=</span><span class="dv">40</span>)</span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a><span class="co"># A tibble: 24 × 6</span></span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a>   trip_starthour  count    <span class="st">`</span><span class="at">%</span><span class="st">`</span> members_p casual_p member_casual_perc_difer</span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true" tabindex="-1"></a>            <span class="sc">&lt;</span>int<span class="sc">&gt;</span>  <span class="er">&lt;</span>int<span class="sc">&gt;</span>  <span class="er">&lt;</span>dbl<span class="sc">&gt;</span>     <span class="er">&lt;</span>dbl<span class="sc">&gt;</span>    <span class="er">&lt;</span>dbl<span class="sc">&gt;</span>                    <span class="er">&lt;</span>dbl<span class="sc">&gt;</span></span>
<span id="cb38-11"><a href="#cb38-11" aria-hidden="true" tabindex="-1"></a> <span class="dv">1</span>              <span class="dv">0</span>  <span class="dv">33083</span>  <span class="fl">0.934</span>      <span class="fl">36.0</span>     <span class="fl">64.0</span>                   <span class="sc">-</span><span class="fl">28.0</span> </span>
<span id="cb38-12"><a href="#cb38-12" aria-hidden="true" tabindex="-1"></a> <span class="dv">2</span>              <span class="dv">1</span>  <span class="dv">19918</span>  <span class="fl">0.562</span>      <span class="fl">33.6</span>     <span class="fl">66.4</span>                   <span class="sc">-</span><span class="fl">32.7</span> </span>
<span id="cb38-13"><a href="#cb38-13" aria-hidden="true" tabindex="-1"></a> <span class="dv">3</span>              <span class="dv">2</span>  <span class="dv">11092</span>  <span class="fl">0.313</span>      <span class="fl">33.3</span>     <span class="fl">66.7</span>                   <span class="sc">-</span><span class="fl">33.3</span> </span>
<span id="cb38-14"><a href="#cb38-14" aria-hidden="true" tabindex="-1"></a> <span class="dv">4</span>              <span class="dv">3</span>   <span class="dv">6282</span>  <span class="fl">0.177</span>      <span class="fl">37.5</span>     <span class="fl">62.5</span>                   <span class="sc">-</span><span class="fl">25.1</span> </span>
<span id="cb38-15"><a href="#cb38-15" aria-hidden="true" tabindex="-1"></a> <span class="dv">5</span>              <span class="dv">4</span>   <span class="dv">7197</span>  <span class="fl">0.203</span>      <span class="fl">56.1</span>     <span class="fl">43.9</span>                    <span class="fl">12.2</span> </span>
<span id="cb38-16"><a href="#cb38-16" aria-hidden="true" tabindex="-1"></a> <span class="dv">6</span>              <span class="dv">5</span>  <span class="dv">24758</span>  <span class="fl">0.699</span>      <span class="fl">79.4</span>     <span class="fl">20.6</span>                    <span class="fl">58.8</span> </span>
<span id="cb38-17"><a href="#cb38-17" aria-hidden="true" tabindex="-1"></a> <span class="dv">7</span>              <span class="dv">6</span>  <span class="dv">75787</span>  <span class="fl">2.14</span>       <span class="fl">83.7</span>     <span class="fl">16.3</span>                    <span class="fl">67.4</span> </span>
<span id="cb38-18"><a href="#cb38-18" aria-hidden="true" tabindex="-1"></a> <span class="dv">8</span>              <span class="dv">7</span> <span class="dv">135220</span>  <span class="fl">3.82</span>       <span class="fl">83.6</span>     <span class="fl">16.4</span>                    <span class="fl">67.2</span> </span>
<span id="cb38-19"><a href="#cb38-19" aria-hidden="true" tabindex="-1"></a> <span class="dv">9</span>              <span class="dv">8</span> <span class="dv">161060</span>  <span class="fl">4.55</span>       <span class="fl">80.9</span>     <span class="fl">19.1</span>                    <span class="fl">61.9</span> </span>
<span id="cb38-20"><a href="#cb38-20" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span>              <span class="dv">9</span> <span class="dv">134959</span>  <span class="fl">3.81</span>       <span class="fl">70.6</span>     <span class="fl">29.4</span>                    <span class="fl">41.1</span> </span>
<span id="cb38-21"><a href="#cb38-21" aria-hidden="true" tabindex="-1"></a><span class="dv">11</span>             <span class="dv">10</span> <span class="dv">150723</span>  <span class="fl">4.26</span>       <span class="fl">62.4</span>     <span class="fl">37.6</span>                    <span class="fl">24.8</span> </span>
<span id="cb38-22"><a href="#cb38-22" aria-hidden="true" tabindex="-1"></a><span class="dv">12</span>             <span class="dv">11</span> <span class="dv">194728</span>  <span class="fl">5.50</span>       <span class="fl">60.3</span>     <span class="fl">39.7</span>                    <span class="fl">20.6</span> </span>
<span id="cb38-23"><a href="#cb38-23" aria-hidden="true" tabindex="-1"></a><span class="dv">13</span>             <span class="dv">12</span> <span class="dv">230444</span>  <span class="fl">6.51</span>       <span class="fl">59.3</span>     <span class="fl">40.7</span>                    <span class="fl">18.6</span> </span>
<span id="cb38-24"><a href="#cb38-24" aria-hidden="true" tabindex="-1"></a><span class="dv">14</span>             <span class="dv">13</span> <span class="dv">237768</span>  <span class="fl">6.71</span>       <span class="fl">57.1</span>     <span class="fl">42.9</span>                    <span class="fl">14.1</span> </span>
<span id="cb38-25"><a href="#cb38-25" aria-hidden="true" tabindex="-1"></a><span class="dv">15</span>             <span class="dv">14</span> <span class="dv">243583</span>  <span class="fl">6.88</span>       <span class="fl">55.5</span>     <span class="fl">44.5</span>                    <span class="fl">11.0</span> </span>
<span id="cb38-26"><a href="#cb38-26" aria-hidden="true" tabindex="-1"></a><span class="dv">16</span>             <span class="dv">15</span> <span class="dv">268049</span>  <span class="fl">7.57</span>       <span class="fl">57.4</span>     <span class="fl">42.6</span>                    <span class="fl">14.8</span> </span>
<span id="cb38-27"><a href="#cb38-27" aria-hidden="true" tabindex="-1"></a><span class="dv">17</span>             <span class="dv">16</span> <span class="dv">317065</span>  <span class="fl">8.95</span>       <span class="fl">62.0</span>     <span class="fl">38.0</span>                    <span class="fl">23.9</span> </span>
<span id="cb38-28"><a href="#cb38-28" aria-hidden="true" tabindex="-1"></a><span class="dv">18</span>             <span class="dv">17</span> <span class="dv">370751</span> <span class="fl">10.5</span>        <span class="fl">64.1</span>     <span class="fl">35.9</span>                    <span class="fl">28.1</span> </span>
<span id="cb38-29"><a href="#cb38-29" aria-hidden="true" tabindex="-1"></a><span class="dv">19</span>             <span class="dv">18</span> <span class="dv">315472</span>  <span class="fl">8.91</span>       <span class="fl">61.7</span>     <span class="fl">38.3</span>                    <span class="fl">23.4</span> </span>
<span id="cb38-30"><a href="#cb38-30" aria-hidden="true" tabindex="-1"></a><span class="dv">20</span>             <span class="dv">19</span> <span class="dv">226646</span>  <span class="fl">6.40</span>       <span class="fl">59.0</span>     <span class="fl">41.0</span>                    <span class="fl">18.1</span> </span>
<span id="cb38-31"><a href="#cb38-31" aria-hidden="true" tabindex="-1"></a><span class="dv">21</span>             <span class="dv">20</span> <span class="dv">147450</span>  <span class="fl">4.16</span>       <span class="fl">55.7</span>     <span class="fl">44.3</span>                    <span class="fl">11.5</span> </span>
<span id="cb38-32"><a href="#cb38-32" aria-hidden="true" tabindex="-1"></a><span class="dv">22</span>             <span class="dv">21</span>  <span class="dv">97127</span>  <span class="fl">2.74</span>       <span class="fl">51.6</span>     <span class="fl">48.4</span>                     <span class="fl">3.25</span></span>
<span id="cb38-33"><a href="#cb38-33" aria-hidden="true" tabindex="-1"></a><span class="dv">23</span>             <span class="dv">22</span>  <span class="dv">76138</span>  <span class="fl">2.15</span>       <span class="fl">45.2</span>     <span class="fl">54.8</span>                    <span class="sc">-</span><span class="fl">9.58</span></span>
<span id="cb38-34"><a href="#cb38-34" aria-hidden="true" tabindex="-1"></a><span class="dv">24</span>             <span class="dv">23</span>  <span class="dv">56174</span>  <span class="fl">1.59</span>       <span class="fl">40.3</span>     <span class="fl">59.7</span>                   <span class="sc">-</span><span class="fl">19.4</span> </span>
<span id="cb38-35"><a href="#cb38-35" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> </span></code></pre></div>
</div>
<div class="cell markdown">
<p>Lets create a dataframe for this</p>
<blockquote>
<p>tempDF_hour&lt;-CleanMasterDF %&gt;%</p>
</blockquote>
<ul>
<li><pre><code>group_by(trip_starthour) %&gt;% </code></pre></li>
<li><pre><code>summarise(count = length(ride_id),</code></pre></li>
<li><pre><code>&#39;%&#39; = (length(ride_id) / nrow(cycledf)) * 100,</code></pre></li>
<li><pre><code>&#39;members_p&#39; = (sum(member_casual == &quot;member&quot;) / length(ride_id)) * 100,</code></pre></li>
<li><pre><code>&#39;casual_p&#39; = (sum(member_casual == &quot;casual&quot;) / length(ride_id)) * 100,</code></pre></li>
<li><pre><code>&#39;member_casual_perc_difer&#39; = members_p - casual_p) %&gt;% print(n=40)</code></pre></li>
</ul>
</div>
<div class="cell markdown">
<p><img
src="vertopal_d909df9118d84f5f89bb4dad05c858b1/e6ce26bb-cefa-46f0-b652-1189951420fe.png"
alt="image.png" /></p>
</div>
<div class="cell markdown">

</div>
<div class="cell code" data-execution_count="2"
data-execution="{&quot;iopub.execute_input&quot;:&quot;2023-10-03T21:05:44.621010Z&quot;,&quot;iopub.status.busy&quot;:&quot;2023-10-03T21:05:44.570378Z&quot;,&quot;iopub.status.idle&quot;:&quot;2023-10-03T21:05:44.660301Z&quot;}"
data-trusted="true">
<div class="sourceCode" id="cb45"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>CleanMasterDF <span class="sc">%&gt;%</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>     <span class="fu">ggplot</span>(<span class="fu">aes</span>(trip_starthour, <span class="at">fill=</span>member_casual)) <span class="sc">+</span></span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>     <span class="fu">labs</span>(<span class="at">x=</span><span class="st">&quot;Hour of the day&quot;</span>, <span class="at">title=</span><span class="st">&quot;Chart  - Distribution by hour of the day&quot;</span>) <span class="sc">+</span></span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>     <span class="fu">geom_bar</span>()</span></code></pre></div>
<div class="output error" data-ename="ERROR"
data-evalue="Error in CleanMasterDF %&gt;% +ggplot(aes(trip_starthour, fill = member_casual)): could not find function &quot;%&gt;%&quot;
">
<pre><code>Error in CleanMasterDF %&gt;% +ggplot(aes(trip_starthour, fill = member_casual)): could not find function &quot;%&gt;%&quot;
Traceback:

</code></pre>
</div>
</div>
<div class="cell markdown">
<p><img
src="vertopal_d909df9118d84f5f89bb4dad05c858b1/15a9acb2-de80-4294-8e2e-f0b4c5385064.png"
alt="image.png" /></p>
</div>
<div class="cell markdown">
<p>Lets try to see it separately for all days</p>
<p>CleanMasterDF%&gt;%</p>
<ul>
<li><pre><code>     ggplot(aes(trip_starthour, fill=member_casual)) +geom_bar()+</code></pre></li>
<li><pre><code>labs(x=&quot;Hour of the day&quot;, title=&quot;Chart for Distribution by hour of the day - divided by weekday&quot;) +facet_wrap(~trip_day)</code></pre></li>
</ul>
</div>
<div class="cell markdown">
<p><img
src="vertopal_d909df9118d84f5f89bb4dad05c858b1/fac95a91-69b9-4042-bc56-5c003c4f8636.png"
alt="image.png" /></p>
<p>Lets try another view</p>
</div>
<div class="cell code">
<div class="sourceCode" id="cb49"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>CleanMasterDF <span class="sc">%&gt;%</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>     <span class="fu">mutate</span>(<span class="at">type_of_day=</span><span class="fu">ifelse</span>(trip_day<span class="sc">==</span><span class="st">&#39;Sun&#39;</span><span class="sc">|</span> trip_day<span class="sc">==</span><span class="st">&#39;Sat&#39;</span>,<span class="st">&#39;weekends&#39;</span>,<span class="st">&#39;weekdays&#39;</span>))<span class="sc">%&gt;%</span></span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>     <span class="fu">ggplot</span>(<span class="fu">aes</span>(trip_starthour, <span class="at">fill=</span>member_casual)) <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">x=</span><span class="st">&quot;Hour of the day&quot;</span>, <span class="at">title=</span><span class="st">&quot;Chart for - Distribution by hour of the day - in the midweek&quot;</span>)<span class="sc">+</span></span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>     <span class="fu">geom_bar</span>()<span class="sc">+</span><span class="fu">facet_wrap</span>(<span class="sc">~</span>type_of_day)</span></code></pre></div>
</div>
<div class="cell markdown">
<p><img
src="vertopal_d909df9118d84f5f89bb4dad05c858b1/3d5d70ea-44bb-4dcd-b58b-42bef6393942.png"
alt="image.png" /></p>
</div>
<div class="cell markdown">
<p>Lets do some graphs on the ride types</p>
</div>
<div class="cell code">
<div class="sourceCode" id="cb50"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">table</span>(CleanMasterDF<span class="sc">$</span>rideable_type,CleanMasterDF<span class="sc">$</span>member_casual)</span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>               </span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>                 casual  member</span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>  classic_bike    <span class="dv">11319</span>   <span class="dv">59297</span></span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a>  docked_bike   <span class="dv">1146005</span> <span class="dv">1820108</span></span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a>  electric_bike  <span class="dv">209226</span>  <span class="dv">295519</span></span></code></pre></div>
</div>
<div class="cell code">
<div class="sourceCode" id="cb51"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>To get the total <span class="cf">in</span> the table <span class="sc">-</span> we can try this</span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> tempdf1<span class="ot">&lt;-</span><span class="fu">table</span>(CleanMasterDF<span class="sc">$</span>rideable_type,CleanMasterDF<span class="sc">$</span>member_casual)</span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> tempdf2<span class="ot">&lt;-</span><span class="fu">cbind</span>(tempdf1, <span class="at">Total=</span><span class="fu">rowSums</span>(tempdf1))</span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> tempdf2</span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true" tabindex="-1"></a>               casual  member   Total</span>
<span id="cb51-7"><a href="#cb51-7" aria-hidden="true" tabindex="-1"></a>classic_bike    <span class="dv">11319</span>   <span class="dv">59297</span>   <span class="dv">70616</span></span>
<span id="cb51-8"><a href="#cb51-8" aria-hidden="true" tabindex="-1"></a>docked_bike   <span class="dv">1146005</span> <span class="dv">1820108</span> <span class="dv">2966113</span></span>
<span id="cb51-9"><a href="#cb51-9" aria-hidden="true" tabindex="-1"></a>electric_bike  <span class="dv">209226</span>  <span class="dv">295519</span>  <span class="dv">504745</span></span>
<span id="cb51-10"><a href="#cb51-10" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> </span></code></pre></div>
</div>
<div class="cell code">
<div class="sourceCode" id="cb52"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(cycledf, <span class="fu">aes</span>(rideable_type, <span class="at">fill=</span>member_casual)) <span class="sc">+</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>     <span class="fu">labs</span>(<span class="at">x=</span><span class="st">&quot;Rideable type&quot;</span>, <span class="at">title=</span><span class="st">&quot;Chart 07 - Distribution of types of bikes&quot;</span>) <span class="sc">+</span></span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>     <span class="fu">geom_bar</span>() <span class="sc">+</span></span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> <span class="cf">function</span>(x) <span class="fu">format</span>(x, <span class="at">scientific =</span> <span class="cn">FALSE</span>))<span class="sc">+</span></span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>     <span class="fu">geom_label</span>(<span class="fu">aes</span>(<span class="at">label=</span>..count..), <span class="at">vjust=</span><span class="dv">1</span>,<span class="at">stat=</span><span class="st">&#39;count&#39;</span>,<span class="at">position =</span> <span class="st">&quot;stack&quot;</span>)</span></code></pre></div>
</div>
<div class="cell markdown">
<p><img
src="vertopal_d909df9118d84f5f89bb4dad05c858b1/42f6ea36-697b-43f9-8e35-20df486314f0.png"
alt="image.png" /></p>
<blockquote>
<p><em>Docked bikes has more rides, <br> Members have a bigger
preference for classic bikes, .<br> Also for electric bikes.</em></p>
</blockquote>
</div>
<section id="section-6--7--consolidating-the-conclusions"
class="cell markdown">
<h1>Section 6 &amp; 7 | Consolidating the Conclusions</h1>
</section>
<div class="cell markdown">
<p>What we couldd gather</p>
<ul>
<li>Members have the biggest proportion of the dataset, ~19% bigger
thand casuals.</li>
<li>The month with the biggest count of data points was August with ~18%
of the dataset.</li>
<li>In all months we have more members' rides than casual rides.</li>
<li>The biggest volume of data is on the the weekend.</li>
<li>There's a bigger volume of bikers in the afternoon.</li>
</ul>
<p>How members differs from casuals:</p>
<ul>
<li>Members may have the biggest volume of data, besides on
saturday.</li>
<li>On this weekday, casuals take place as having the most data
points.</li>
<li>Weekends have the biggest volume of casuals, starting on friday, a
~20% increase.</li>
<li>We have more members during the morning, mainly between 5am and
11am. And more casuals between 11pm and 4am.</li>
<li>Riding time for members keeps unchanged during the midweek,
increasing during weekends.</li>
</ul>
<p>Members also have a bigger preference for classic bikes, so they can
exercise when going to work.</p>
<p>Conclusion</p>
<p>Members use the bikes for fixed activities, one of those is going to
work. Bikes are used for recreation on the weekends. Rides are
influenced by temperature.(to be correalted with the temperature data of
this perticular region)</p>
</div>
</body>
</html>
